<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Производителност</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 2002-2003 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="pools.html">Преди: Множ. адреси и баланс на натоварването</a>]
[<a href="index.html">Съдържание</a>]
[<a href="ftp.html">Следва: Проблеми с FTP</a>]

<p>
<h1><font color="#e00000">PF: Производителност</font></h1>
<hr>

<h3>
"Каква пропусквателна способност (bandwidth) може да управлява PF?"<br>
"Какъв компютър ми е необходим за да управлявам моята Интернет връзка?"
</h3>

<p>
Няма лесни отговори на тези въпроси. За някои приложения, 486/66 с двойка
добри ISA мрежови карти може да филтрира и извършва NAT до 5Mbps, но за
други приложения ще е необходима далеч по-бърза машина с много по-добри
мрежови карти. Инстинския проблем е не в броя на битовете за секунда, а
по-скоро в броя пакети за секунда, както и в комплекността на набора от
правила (ruleset).

<p>
Производителността на PF се определя от няколко променливи:
<ul>
<li>Брой пакети в секунда. Изискванията за обработката на пакет от 1500 байта
и за такъв от 1 байт не се различават особено. Броят на пакетите в секунда
се определя от това колко пъти в секунда ще бъде изпълнена таблицата на 
състоянията (или в случай на несъвпадение - правилата за филтриране). Това
определя и ефективността на системата.

<li>Производителност на системната шина (system bus). Максималната
пропусквателна способност за ISA шина е 8Mbps, и когато процесора осъществява
достъп до нея, намалява скоростта си. Ефективното действие е като 80286 на 
8MHz, независимо колко добър всъщност е този процесор. PCI шината има далеч
по-добра действителна пропусквателна способност и не оказва толкова силно
влияние на процесора.

<li>Ефективност на мрежовата карта. Просто някой карти са по-добри от 
останалите. Realtek 8139
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rl&amp;sektion=4&amp;manpath=OpenBSD+3.3"
>rl</a>) 
базираните карти са извесни с ниската си производителност, докато Intel 21143
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4&amp;manpath=OpenBSD+3.3"
>dc</a>)
базираните карти се справят изключително добре. За максимална производителност
опитайте да използвате gigabit Ethernet карти, дори мрежата Ви да не е gigabit,
защото те имат по-добро буфериране.

<li>Дизайн и сложност на набора правила. Колкото по-сложен е набора правила,
толкова по-бавен е той. Колкото повече пакети се филтрират от
<tt>keep state</tt> и <tt>quick</tt> правила, толкова по-висока е 
производителността. Колкото повече редове за изпълняват за всеки пакет,
толкова по-слаба е производителността.

<li>CPU и RAM. PF е процес в ядрото, той не използва swap. Затова ако имате
достатъчно RAM - той работи, ако не - спира (panic), поради липсата на
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pool&amp;sektion=9&amp;manpath=OpenBSD+3.3"
>pool(9)</a>. Не са необходими огромни количества RAM -- 32MB ще са достатъчни
за около 30000 състояния, което е нормално за малък офис или домашна мрежа.
Повечето потребители ще открият, че "рециклиран" компютър е повече от 
достатъчен за PF система - 300MHz-ова система ще обработва бързо доста голям
брой пакети, особено ако е комбинирана с добри мрежови карти и добър набор от
правила.
</ul>

<p>
Хората често питат за еталонни тестове (benchmarks) за PF. Единстваният
тест е производителността на <i>Вашата</i> система, във <i>Вашето</i>
обкръжение. Тест, който не дублира Вашето обкръжение няма да Ви помогне
да планирате firewall-а си. Най-доброто решение е сами да тествате PF,
в обкръжение (по-възможност и hardware), максимално доближаващо се до 
реалните условия, в които ще работи firewall-а.

<p>
PF се използва в някои големи и изключително натоварени с трафик приложения.
Разработчиците му са напреднали потребители. Изводите - вероятно ще Ви свърши
работа.

<p>
[<a href="pools.html">Преди: Множ. адреси и баланс на натоварването</a>]
[<a href="index.html">Съдържание</a>]
[<a href="ftp.html">Следва: Проблеми с FTP</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
Оригинал: [ $OpenBSD: perf.html,v 1.6 2003/06/13 02:54:08 nick Exp ]<br> 
$Id: perf.html,v 1.2 2003/09/12 02:50:03 moo Exp $<br>
$Translation$<br>
$OpenBSD$
</small>

</body>
</html> 
